<tool id="extract_oligo_hyb_regions_from_amplicon_sequevars" name="Extract Oligo Hyb Regions From Amplicon Sequevars" version="0.0.1">
  <requirements>
    <requirement type="package" version="1.70">biopython</requirement>
  </requirements>
  <command detect_errors="exit_code"><![CDATA[
    python $__tool_directory__/extract_oligo_hyb_regions_from_amplicon_sequevars.py
    '$input_fasta'
    '$oligo_fasta'
    '$blast_results'
    '$output_fasta'
    '$output_txt'
    #if $safe_list
    -s '$safe_list'
	#end if
  ]]></command>
  <inputs>
    <param name="input_fasta" format="fasta" type="data" />
    <param name="oligo_fasta" format="fasta" type="data" />
    <param name="blast_results" format="tabular" type="data" />
    <param name="safe_list" format="fasta" type="data" optional="true" />
  </inputs>
  <outputs>
      <data format="fasta" name="output_fasta" type="data" optional="true" ></data>
      <data format="txt" name="output_txt" type="data" ></data>
  </outputs>
  <tests>
  	#if $safe_list
    	<test>
      	    <param name="input_fasta" value="99_amplicon-neg_FluA_H1N1.fasta" />
      	    <param name="oligo_fasta" value="FluA_oligos.fasta" />
      	    <param name="blast_results" value="Galaxy70-[blastn-short_99_amplicon-neg_FluA_H1N1.fasta_vs__FluA_oligos.fasta__].tabular" />
     	    <param name="safe_list" value="hyb_site_safelist.fasta" />
      	    <output name="output_fasta" value="with_safelist_hyb_site_sequevars.fasta" optional="true" />
      	    <output name="output_txt" value="with_safelist_hyb_sites_summary.txt" />
    	</test>
    #end if
       <test>
           <param name="input_fasta" value="99_amplicon-neg_FluA_H1N1.fasta" />
           <param name="oligo_fasta" value="FluA_oligos.fasta" />
           <param name="blast_results" value="Galaxy70-[blastn-short_99_amplicon-neg_FluA_H1N1.fasta_vs__FluA_oligos.fasta__].tabular" />
           <output name="output_fasta" value="no_safelist_hyb_site_sequevars.fasta" optional="true" />
           <output name="output_txt" value="no_safelist_hyb_sites_summary.txt" />
       </test>
  </tests>
  <help><![CDATA[
    Extracts oligonucleotide hybridization sites from PCR amplicons in a fasta file and outputs concatenated hybridization sites to fasta.
  ]]></help>
  <citations>
  </citations>
</tool>
